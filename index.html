<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Country-Building Simulator 3.0</title>
<style>
:root {
    --primary: #3498db; --secondary: #2ecc71; --danger: #e74c3c; --warning: #f39c12;
    --dark: #2c3e50; --light: #ecf0f1; --shadow: 0 4px 6px rgba(0,0,0,0.1); --transition: all 0.3s ease;
}
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;}
body{background:linear-gradient(135deg,#1a2a6c,#b21f1f,#fdbb2d);color:var(--light);min-height:100vh;padding:20px;transition:background 0.5s;}
body.light-mode{background:#ecf0f1;color:#2c3e50;}
.container{max-width:1200px;margin:0 auto;}
header{text-align:center;margin-bottom:30px;padding:20px;background:rgba(255,255,255,0.1);border-radius:15px;backdrop-filter:blur(10px);box-shadow:var(--shadow);}
h1{font-size:2.5rem;margin-bottom:10px;text-shadow:2px 2px 4px rgba(0,0,0,0.3);}
.game-phase{display:none;background:rgba(255,255,255,0.1);border-radius:15px;padding:30px;margin-bottom:20px;backdrop-filter:blur(10px);box-shadow:var(--shadow);}
.active{display:block;}
.selection-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-top:20px;}
.selection-card{background:rgba(255,255,255,0.15);border-radius:12px;padding:20px;text-align:center;cursor:pointer;transition:var(--transition);border:2px solid transparent;}
.selection-card:hover{transform:translateY(-5px);background:rgba(255,255,255,0.25);border-color:var(--primary);}
.selection-card.selected{background:rgba(52,152,219,0.3);border-color:var(--primary);box-shadow:0 0 15px rgba(52,152,219,0.5);}
.card-icon{font-size:3rem;margin-bottom:15px;}
.btn{background:var(--primary);color:white;border:none;padding:12px 25px;border-radius:50px;cursor:pointer;font-size:1rem;font-weight:600;transition:var(--transition);box-shadow:var(--shadow);margin-top:20px;}
.btn:hover{background:#2980b9;transform:translateY(-2px);box-shadow:0 6px 12px rgba(0,0,0,0.2);}
.btn:disabled{background:#7f8c8d;cursor:not-allowed;transform:none;box-shadow:none;}
.dashboard{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin-bottom:30px;}
.stat-card{background:rgba(255,255,255,0.15);border-radius:12px;padding:20px;text-align:center;backdrop-filter:blur(10px);box-shadow:var(--shadow);}
.stat-value{font-size:2rem;font-weight:bold;margin:10px 0;}
.event-modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);display:flex;justify-content:center;align-items:center;z-index:1000;opacity:0;pointer-events:none;transition:var(--transition);}
.event-modal.active{opacity:1;pointer-events:all;}
.modal-content{background:var(--dark);border-radius:15px;padding:30px;max-width:500px;width:90%;box-shadow:0 10px 30px rgba(0,0,0,0.5);transform:translateY(20px);transition:var(--transition);}
.event-modal.active .modal-content{transform:translateY(0);}
.modal-buttons{display:flex;justify-content:space-between;margin-top:20px;}
.btn-success{background:var(--secondary);}
.btn-danger{background:var(--danger);}
.game-over{text-align:center;padding:40px;}
.game-over h2{font-size:2.5rem;margin-bottom:20px;}
.turn-summary{position:fixed;bottom:20px;right:20px;background:rgba(0,0,0,0.7);padding:20px;border-radius:12px;color:white;display:none;}
.toggle-mode{position:fixed;top:20px;right:20px;padding:10px 15px;border-radius:12px;background:var(--primary);cursor:pointer;z-index:1001;}
@media (max-width:768px){.selection-grid{grid-template-columns:1fr;}.dashboard{grid-template-columns:repeat(2,1fr);}}
</style>
</head>
<body>
<div class="toggle-mode" id="toggle-mode">üåû Light Mode</div>
<div class="container">
<header>
<h1>Country-Building Simulator 3.0</h1>
<p id="turn-header">Build your nation from the ground up! Turn: 1</p>
</header>

<!-- Continent Phase -->
<div id="continent-phase" class="game-phase active">
<h2>Choose Your Continent</h2>
<div class="selection-grid">
<div class="selection-card" data-continent="africa"><div class="card-icon">üåç</div><h3>Africa</h3></div>
<div class="selection-card" data-continent="asia"><div class="card-icon">üóæ</div><h3>Asia</h3></div>
<div class="selection-card" data-continent="europe"><div class="card-icon">üèõÔ∏è</div><h3>Europe</h3></div>
<div class="selection-card" data-continent="north-america"><div class="card-icon">üóΩ</div><h3>North America</h3></div>
<div class="selection-card" data-continent="south-america"><div class="card-icon">üå¥</div><h3>South America</h3></div>
<div class="selection-card" data-continent="oceania"><div class="card-icon">üèùÔ∏è</div><h3>Oceania</h3></div>
</div>
<button id="next-to-politics" class="btn" disabled>Continue</button>
</div>

<!-- Political Phase -->
<div id="politics-phase" class="game-phase">
<h2>Choose Your Political System</h2>
<div class="selection-grid">
<div class="selection-card" data-system="capitalist"><div class="card-icon">üíº</div><h3>Capitalist</h3></div>
<div class="selection-card" data-system="socialist"><div class="card-icon">‚öñÔ∏è</div><h3>Socialist</h3></div>
<div class="selection-card" data-system="mixed"><div class="card-icon">üîÑ</div><h3>Mixed Economy</h3></div>
</div>
<button id="next-to-game" class="btn" disabled>Start Game</button>
</div>

<!-- Game Phase -->
<div id="game-phase" class="game-phase">
<div class="dashboard">
<div class="stat-card"><h3>Money</h3><div class="stat-value" id="money-value"></div></div>
<div class="stat-card"><h3>Population</h3><div class="stat-value" id="population-value"></div></div>
<div class="stat-card"><h3>Stability</h3><div class="stat-value" id="stability-value"></div></div>
</div>
<div style="text-align:center;margin-top:30px;"><button id="next-turn" class="btn">Next Turn</button></div>
</div>

<!-- Event Modal -->
<div id="event-modal" class="event-modal">
<div class="modal-content">
<h2 id="event-title"></h2>
<p id="event-description"></p>
<div class="modal-buttons">
<button id="event-option1" class="btn btn-success">Option 1</button>
<button id="event-option2" class="btn btn-danger">Option 2</button>
</div>
</div>
</div>

<!-- Game Over Modal -->
<div id="game-over-modal" class="event-modal">
<div class="modal-content game-over">
<h2 id="game-over-title">Game Over!</h2>
<p id="game-over-message"></p>
<button id="restart-game" class="btn">Play Again</button>
</div>
</div>
</div>

<script>
// Game state
let gameState = JSON.parse(localStorage.getItem('cbs-game')) || {
  continent: null,
  politicalSystem: null,
  money: 1000 + Math.floor(Math.random()*500),
  population: 100000 + Math.floor(Math.random()*50000),
  stability: 70 + Math.floor(Math.random()*10),
  turn: 1
};

const saveGame = () => localStorage.setItem('cbs-game', JSON.stringify(gameState));

// DOM elements
const continentCards=document.querySelectorAll('[data-continent]');
const systemCards=document.querySelectorAll('[data-system]');
const nextToPoliticsBtn=document.getElementById('next-to-politics');
const nextToGameBtn=document.getElementById('next-to-game');
const nextTurnBtn=document.getElementById('next-turn');
const continentPhase=document.getElementById('continent-phase');
const politicsPhase=document.getElementById('politics-phase');
const gamePhase=document.getElementById('game-phase');
const moneyEl=document.getElementById('money-value');
const popEl=document.getElementById('population-value');
const stabEl=document.getElementById('stability-value');
const turnHeader=document.getElementById('turn-header');
const gameOverModal=document.getElementById('game-over-modal');
const restartBtn=document.getElementById('restart-game');
const toggleMode=document.getElementById('toggle-mode');

let darkMode = true;
toggleMode.addEventListener('click', ()=>{
  darkMode = !darkMode;
  document.body.classList.toggle('light-mode', !darkMode);
  toggleMode.textContent = darkMode?"üåû Light Mode":"üåö Dark Mode";
});

// Continent selection
continentCards.forEach(c => c.addEventListener('click', ()=>{
  continentCards.forEach(c2=>c2.classList.remove('selected'));
  c.classList.add('selected');
  gameState.continent = c.dataset.continent;
  nextToPoliticsBtn.disabled = false;
  saveGame();
}));

// Political selection
systemCards.forEach(c => c.addEventListener('click', ()=>{
  systemCards.forEach(c2=>c2.classList.remove('selected'));
  c.classList.add('selected');
  gameState.politicalSystem = c.dataset.system;
  nextToGameBtn.disabled = false;
  saveGame();
}));

// Navigation
nextToPoliticsBtn.addEventListener('click', ()=>{
  continentPhase.classList.remove('active');
  politicsPhase.classList.add('active');
});
nextToGameBtn.addEventListener('click', ()=>{
  politicsPhase.classList.remove('active');
  gamePhase.classList.add('active');
  updateUI();
});

// Update UI
function updateUI(){
  moneyEl.textContent = gameState.money;
  popEl.textContent = gameState.population;
  stabEl.textContent = gameState.stability;
  turnHeader.textContent = `Turn: ${gameState.turn}`;
  saveGame();
}

// Random event system
function triggerEvent(){
  const chance = Math.random();
  if(chance < 0.3){
    const events = [
      {title:"Economic Boom",desc:"+200 money",money:200,pop:0,stab:0},
      {title:"Minor Protest",desc:"-5 stability",money:0,pop:0,stab:-5},
      {title:"Population Growth",desc:"+100 population",money:0,pop:100,stab:0}
    ];
    const e = events[Math.floor(Math.random()*events.length)];
    gameState.money += e.money;
    gameState.population += e.pop;
    gameState.stability += e.stab;
    alert(`Event: ${e.title} - ${e.desc}`);
  }
}

// Next Turn
nextTurnBtn.addEventListener('click', ()=>{
  gameState.turn++;
  gameState.money += Math.floor(Math.random()*100);
  gameState.population += Math.floor(Math.random()*50);
  gameState.stability += Math.floor(Math.random()*5)-2;
  if(gameState.stability > 100) gameState.stability = 100;
  if(gameState.stability <=0){
    gameState.stability = 0;
    gameOverModal.classList.add('active');
    return;
  }
  triggerEvent();
  updateUI();
});

// Restart
restartBtn.addEventListener('click', ()=>{
  localStorage.removeItem('cbs-game');
  location.reload();
});

// Initial UI
updateUI();
</script>
</body>
</html>
