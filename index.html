<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Country-Building Simulator 3.0</title>
<style>
:root {
    --primary: #3498db; --secondary: #2ecc71; --danger: #e74c3c; --warning: #f39c12;
    --dark: #2c3e50; --light: #ecf0f1; --shadow: 0 4px 6px rgba(0,0,0,0.1); --transition: all 0.3s ease;
}
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;}
body{background:linear-gradient(135deg,#1a2a6c,#b21f1f,#fdbb2d);color:var(--light);min-height:100vh;padding:20px;transition:background 0.5s;}
body.light-mode{background:#ecf0f1;color:#2c3e50;}
.container{max-width:1200px;margin:0 auto;}
header{text-align:center;margin-bottom:30px;padding:20px;background:rgba(255,255,255,0.1);border-radius:15px;backdrop-filter:blur(10px);box-shadow:var(--shadow);}
h1{font-size:2.5rem;margin-bottom:10px;text-shadow:2px 2px 4px rgba(0,0,0,0.3);}
.game-phase{display:none;background:rgba(255,255,255,0.1);border-radius:15px;padding:30px;margin-bottom:20px;backdrop-filter:blur(10px);box-shadow:var(--shadow);animation:fadeIn 0.5s ease;}
.active{display:block;}
.selection-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-top:20px;}
.selection-card{background:rgba(255,255,255,0.15);border-radius:12px;padding:20px;text-align:center;cursor:pointer;transition:var(--transition);border:2px solid transparent;}
.selection-card:hover{transform:translateY(-5px);background:rgba(255,255,255,0.25);border-color:var(--primary);}
.selection-card.selected{background:rgba(52,152,219,0.3);border-color:var(--primary);box-shadow:0 0 15px rgba(52,152,219,0.5);}
.card-icon{font-size:3rem;margin-bottom:15px;}
.btn{background:var(--primary);color:white;border:none;padding:12px 25px;border-radius:50px;cursor:pointer;font-size:1rem;font-weight:600;transition:var(--transition);box-shadow:var(--shadow);margin-top:20px;}
.btn:hover{background:#2980b9;transform:translateY(-2px);box-shadow:0 6px 12px rgba(0,0,0,0.2);}
.btn:disabled{background:#7f8c8d;cursor:not-allowed;transform:none;box-shadow:none;}
.dashboard{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin-bottom:30px;}
.stat-card{background:rgba(255,255,255,0.15);border-radius:12px;padding:20px;text-align:center;backdrop-filter:blur(10px);box-shadow:var(--shadow);}
.stat-value{font-size:2rem;font-weight:bold;margin:10px 0;}
.action-panel{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;}
.action-card{background:rgba(255,255,255,0.15);border-radius:12px;padding:20px;backdrop-filter:blur(10px);box-shadow:var(--shadow);}
.action-card h3{margin-bottom:15px;border-bottom:1px solid rgba(255,255,255,0.2);padding-bottom:10px;}
.action-item{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid rgba(255,255,255,0.1);}
.action-item:last-child{border-bottom:none;}
.cost{color:var(--warning);font-weight:bold;}
.event-modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);display:flex;justify-content:center;align-items:center;z-index:1000;opacity:0;pointer-events:none;transition:var(--transition);}
.event-modal.active{opacity:1;pointer-events:all;}
.modal-content{background:var(--dark);border-radius:15px;padding:30px;max-width:500px;width:90%;box-shadow:0 10px 30px rgba(0,0,0,0.5);transform:translateY(20px);transition:var(--transition);}
.event-modal.active .modal-content{transform:translateY(0);}
.modal-buttons{display:flex;justify-content:space-between;margin-top:20px;}
.btn-success{background:var(--secondary);}
.btn-danger{background:var(--danger);}
.game-over{text-align:center;padding:40px;}
.game-over h2{font-size:2.5rem;margin-bottom:20px;}
.progress-bar{height:10px;background:rgba(255,255,255,0.2);border-radius:5px;margin:10px 0;overflow:hidden;}
.progress-fill{height:100%;background:var(--secondary);border-radius:5px;transition:width 0.5s ease;}
@keyframes fadeIn{from{opacity:0;}to{opacity:1;}}
@keyframes pulse{0%{transform:scale(1);}50%{transform:scale(1.05);}100%{transform:scale(1);}}
.pulse{animation:pulse 2s infinite;}
.tooltip{position:relative;display:inline-block;}
.tooltip .tooltiptext{visibility:hidden;width:200px;background-color:var(--dark);color:#fff;text-align:center;border-radius:6px;padding:10px;position:absolute;z-index:1;bottom:125%;left:50%;transform:translateX(-50%);opacity:0;transition:opacity 0.3s;font-size:0.9rem;}
.tooltip:hover .tooltiptext{visibility:visible;opacity:1;}
.turn-summary{position:fixed;bottom:20px;right:20px;background:rgba(0,0,0,0.7);padding:20px;border-radius:12px;color:white;display:none;}
.toggle-mode{position:fixed;top:20px;right:20px;padding:10px 15px;border-radius:12px;background:var(--primary);cursor:pointer;z-index:1001;}
@media (max-width:768px){.selection-grid{grid-template-columns:1fr;}.dashboard{grid-template-columns:repeat(2,1fr);}}
</style>
</head>
<body>
<div class="toggle-mode" id="toggle-mode">üåû Light Mode</div>
<div class="container">
<header>
<h1>Country-Building Simulator 3.0</h1>
<p id="turn-header">Build your nation from the ground up! Turn: 1</p>
</header>

<!-- Continent Phase -->
<div id="continent-phase" class="game-phase active">
<h2>Choose Your Continent</h2>
<p>Each continent offers unique advantages for your nation.</p>
<div class="selection-grid">
<div class="selection-card" data-continent="africa"><div class="card-icon">üåç</div><h3>Africa</h3><p>Rich in mineral resources</p><div class="tooltip">‚ÑπÔ∏è<span class="tooltiptext">+50% mineral production, -20% initial infrastructure</span></div></div>
<div class="selection-card" data-continent="asia"><div class="card-icon">üóæ</div><h3>Asia</h3><p>Large population & tech potential</p><div class="tooltip">‚ÑπÔ∏è<span class="tooltiptext">+30% population growth, +20% tech research speed</span></div></div>
<div class="selection-card" data-continent="europe"><div class="card-icon">üèõÔ∏è</div><h3>Europe</h3><p>Advanced infrastructure</p><div class="tooltip">‚ÑπÔ∏è<span class="tooltiptext">+40% initial infrastructure, -10% resource production</span></div></div>
<div class="selection-card" data-continent="north-america"><div class="card-icon">üóΩ</div><h3>North America</h3><p>Strong economy</p><div class="tooltip">‚ÑπÔ∏è<span class="tooltiptext">+30% money generation, +15% trade efficiency</span></div></div>
<div class="selection-card" data-continent="south-america"><div class="card-icon">üå¥</div><h3>South America</h3><p>Fertile land & natural resources</p><div class="tooltip">‚ÑπÔ∏è<span class="tooltiptext">+40% food production, +25% natural resources</span></div></div>
<div class="selection-card" data-continent="oceania"><div class="card-icon">üèùÔ∏è</div><h3>Oceania</h3><p>High stability & strategic location</p><div class="tooltip">‚ÑπÔ∏è<span class="tooltiptext">+50% stability, +30% diplomatic power</span></div></div>
</div>
<button id="next-to-politics" class="btn" disabled>Continue to Political System</button>
</div>

<!-- Political Phase -->
<div id="politics-phase" class="game-phase">
<h2>Choose Your Political System</h2>
<p>Your political system affects economy, stability, and growth.</p>
<div class="selection-grid">
<div class="selection-card" data-system="capitalist"><div class="card-icon">üíº</div><h3>Capitalist</h3><p>Free market economy</p><div class="tooltip">‚ÑπÔ∏è<span class="tooltiptext">+25% money generation, -15% stability</span></div></div>
<div class="selection-card" data-system="socialist"><div class="card-icon">‚öñÔ∏è</div><h3>Socialist</h3><p>Public ownership & welfare</p><div class="tooltip">‚ÑπÔ∏è<span class="tooltiptext">+30% stability, -20% economic growth</span></div></div>
<div class="selection-card" data-system="mixed"><div class="card-icon">üîÑ</div><h3>Mixed Economy</h3><p>Balanced private & government</p><div class="tooltip">‚ÑπÔ∏è<span class="tooltiptext">Balanced bonuses to all stats</span></div></div>
</div>
<button id="next-to-game" class="btn" disabled>Start Building Your Nation</button>
</div>

<!-- Main Game Phase -->
<div id="game-phase" class="game-phase">
<div class="dashboard">
<div class="stat-card"><h3>Money</h3><div class="stat-value" id="money-value"></div><div class="progress-bar"><div class="progress-fill" id="money-bar"></div></div></div>
<div class="stat-card"><h3>Population</h3><div class="stat-value" id="population-value"></div><div class="progress-bar"><div class="progress-fill" id="population-bar"></div></div></div>
<div class="stat-card"><h3>Technology</h3><div class="stat-value" id="tech-value"></div><div class="progress-bar"><div class="progress-fill" id="tech-bar"></div></div></div>
<div class="stat-card"><h3>Minerals</h3><div class="stat-value" id="minerals-value"></div><div class="progress-bar"><div class="progress-fill" id="minerals-bar"></div></div></div>
<div class="stat-card"><h3>Stability</h3><div class="stat-value" id="stability-value"></div><div class="progress-bar"><div class="progress-fill" id="stability-bar"></div></div></div>
<div class="stat-card"><h3>Influence</h3><div class="stat-value" id="influence-value"></div><div class="progress-bar"><div class="progress-fill" id="influence-bar"></div></div></div>
</div>
<div class="action-panel">
<!-- Actions here like your previous code (economy, society, tech, resources) -->
</div>
<div style="text-align:center;margin-top:30px;"><button id="next-turn" class="btn pulse">Next Turn</button></div>
</div>

<!-- Event Modal -->
<div id="event-modal" class="event-modal">
<div class="modal-content"><h2 id="event-title"></h2><p id="event-description"></p><div class="modal-buttons"><button id="event-option1" class="btn btn-success"></button><button id="event-option2" class="btn btn-danger"></button></div></div>
</div>

<!-- Game Over Modal -->
<div id="game-over-modal" class="event-modal">
<div class="modal-content game-over"><h2 id="game-over-title"></h2><p id="game-over-message"></p><button id="restart-game" class="btn">Play Again</button></div>
</div>

<div class="turn-summary" id="turn-summary"></div>
</div>

<script>
// Initialize or load game state
let gameState = JSON.parse(localStorage.getItem('cbs-game')) || {
continent: null, politicalSystem:null, money: 1000+Math.floor(Math.random()*500),
population: 1000000+Math.floor(Math.random()*500000), technology:20+Math.floor(Math.random()*10),
minerals:500+Math.floor(Math.random()*200), stability:70+Math.floor(Math.random()*10), influence:10+Math.floor(Math.random()*5),
turn:1, buildings:{factory:0,infrastructure:0,research:0,mine:0}, modifiers:{money:1,population:1,technology:1,minerals:1,stability:1,influence:1}
};
const saveGame = ()=>localStorage.setItem('cbs-game',JSON.stringify(gameState));

// DOM Elements
const continentCards=document.querySelectorAll('[data-continent]');
const systemCards=document.querySelectorAll('[data-system]');
const nextToPoliticsBtn=document.getElementById('next-to-politics');
const nextToGameBtn=document.getElementById('next-to-game');
const nextTurnBtn=document.getElementById('next-turn');
const eventModal=document.getElementById('event-modal');
const gamePhase=document.getElementById('game-phase');
const continentPhase=document.getElementById('continent-phase');
const politicsPhase=document.getElementById('politics-phase');
const gameOverModal=document.getElementById('game-over-modal');
const restartGameBtn=document.getElementById('restart-game');
const turnSummary=document.getElementById('turn-summary');
const toggleMode=document.getElementById('toggle-mode');

let darkMode=true;
toggleMode.addEventListener('click',()=>{
darkMode=!darkMode;
document.body.classList.toggle('light-mode',!darkMode);
toggleMode.textContent=darkMode?"üåû Light Mode":"üåö Dark Mode";
});

// Continent selection
continentCards.forEach(c=>{
c.addEventListener('click',()=>{
continentCards.forEach(c2=>c2.classList.remove('selected'));
c.classList.add('selected');
gameState.continent=c.getAttribute('data-continent');
nextToPoliticsBtn.disabled=false;
saveGame();
});
});

// Political selection
systemCards.forEach(c=>{
c.addEventListener('click',()=>{
systemCards.forEach(c2=>c2.classList.remove('selected'));
c.classList.add('selected');
gameState.politicalSystem=c.getAttribute('data-system');
nextToGameBtn.disabled=false;
saveGame();
});
});

// Navigation
nextToPoliticsBtn.addEventListener('click',()=>{
continentPhase.classList.remove('active');
politicsPhase.classList.add('active');
saveGame();
});
nextToGameBtn.addEventListener('click',()=>{
politicsPhase.classList.remove('active');
gamePhase.classList.add('active');
applyBonuses();
updateUI();
saveGame();
});

// Next turn
nextTurnBtn.addEventListener('click',nextTurn);
restartGameBtn.addEventListener('click',()=>location.reload());

// Bonuses
const continentBonuses={africa:{minerals:1.5,infrastructure:0.8},asia:{population:1.3,technology:1.2},europe:{infrastructure:1.4,minerals:0.9},
'north-america':{money:1.3,influence:1.15},'south-america':{minerals:1.25,stability:1.1},oceania:{stability:1.5,influence:1.3}};
const politicalBonuses={capitalist:{money:1.25,stability:0.85},socialist:{stability:1.3,money:0.8},mixed:{money:1.1,stability:1.1,technology:1.05,minerals:1.05}};
function applyBonuses(){
Object.keys(gameState.modifiers).forEach(k=>gameState.modifiers[k]=1);
if(gameState.continent&&continentBonuses[gameState.continent]){Object.keys(continentBonuses[gameState.continent]).forEach(k=>gameState.modifiers[k]*=continentBonuses[gameState.continent][k]);}
if(gameState.politicalSystem&&politicalBonuses[gameState.politicalSystem]){Object.keys(politicalBonuses[gameState.politicalSystem]).forEach(k=>gameState.modifiers[k]*=politicalBonuses[gameState.politicalSystem][k]);}
}

// Minimal random event example
const events=[
{title:"Economic Crisis",description:"Global downturn!",option1:"Stimulate (+)",option2:"Austerity (-)",effects1:{money:
function nextTurn() {
  game.turn++;

  // Random growth
  game.money += Math.floor(Math.random() * 200);
  game.population += Math.floor(Math.random() * 100);
  game.stability += Math.floor(Math.random() * 5) - 2; // can go down slightly

  // Clamp stability between 0-100
  if (game.stability > 100) game.stability = 100;
  if (game.stability < 0) game.stability = 0;

  // Random event
  const eventChance = Math.random();
  if (eventChance < 0.3) {
    const events = [
      {text:"Minor Economic Boom! +200 money", money:200, population:0, stability:0},
      {text:"Small Protest! -5 stability", money:0, population:0, stability:-5},
      {text:"Population Growth! +50 people", money:0, population:50, stability:0}
    ];
    const e = events[Math.floor(Math.random() * events.length)];
    game.money += e.money;
    game.population += e.population;
    game.stability += e.stability;
    eventEl.textContent = `Turn ${game.turn} Event: ${e.text}`;
  } else {
    eventEl.textContent = `Turn ${game.turn}: No event.`;
  }

  updateUI();

  // Simple game over
  if (game.stability <= 0) {
    alert("Your country collapsed! Game Over.");
    game.stability = 0;
    updateUI();
    document.getElementById("nextTurn").disabled = true;
  }
}

document.getElementById("nextTurn").addEventListener("click", nextTurn);

// Initial UI update
updateUI();
</script>
</body>
</html>
