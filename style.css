// Elements
const continentSelect = document.getElementById("continent-select");
const nextBtn = document.getElementById("next-btn");

const politicsSection = document.getElementById("politics-section");
const politicsSelect = document.getElementById("politics-select");
const startBtn = document.getElementById("start-btn");

const gameplaySection = document.getElementById("gameplay-section");
const economyEl = document.getElementById("economy");
const militaryEl = document.getElementById("military");
const happinessEl = document.getElementById("happiness");
const nextTurnBtn = document.getElementById("next-turn-btn");

const restartBtn = document.getElementById("restart-btn");
const turnEl = document.getElementById("turn");

let turn = 1;
let stats = {
    economy: 50,
    military: 50,
    happiness: 50
};

// Enable next button when a continent is selected
continentSelect.addEventListener("change", () => {
    nextBtn.disabled = continentSelect.value === "";
});

// Go to politics section
nextBtn.addEventListener("click", () => {
    document.getElementById("continent-section").style.display = "none";
    politicsSection.style.display = "block";
});

// Enable start button when a political system is selected
politicsSelect.addEventListener("change", () => {
    startBtn.disabled = politicsSelect.value === "";
});

// Start the game
startBtn.addEventListener("click", () => {
    politicsSection.style.display = "none";
    gameplaySection.style.display = "block";
    updateStats();
});

// Handle next turn
nextTurnBtn.addEventListener("click", () => {
    turn++;
    turnEl.textContent = turn;

    // Randomly change stats
    stats.economy += Math.floor(Math.random() * 11 - 5); // -5 to +5
    stats.military += Math.floor(Math.random() * 11 - 5);
    stats.happiness += Math.floor(Math.random() * 11 - 5);

    // Clamp values between 0 and 100
    stats.economy = Math.max(0, Math.min(100, stats.economy));
    stats.military = Math.max(0, Math.min(100, stats.military));
    stats.happiness = Math.max(0, Math.min(100, stats.happiness));

    updateStats();

    // Game over if any stat reaches 0
    if (stats.economy === 0 || stats.military === 0 || stats.happiness === 0) {
        alert("Game Over! One of your stats reached 0.");
        gameplaySection.style.display = "none";
        restartBtn.style.display = "block";
    }
});

// Restart the game
restartBtn.addEventListener("click", () => {
    turn = 1;
    stats = { economy: 50, military: 50, happiness: 50 };
    turnEl.textContent = turn;

    continentSelect.value = "";
    nextBtn.disabled = true;

    politicsSelect.value = "";
    startBtn.disabled = true;

    restartBtn.style.display = "none";
    document.getElementById("continent-section").style.display = "block";
});

function updateStats() {
    economyEl.textContent = stats.economy;
    militaryEl.textContent = stats.military;
    happinessEl.textContent = stats.happiness;
}
